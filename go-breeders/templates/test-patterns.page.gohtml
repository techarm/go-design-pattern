{{ template "base" . }} 

{{ define "content" }} 
<div class="container">
    <div class="row">
        <div class="col">
            <h1 class="mt-3">Design Patterns in GO</h1>
            <hr>
            <h3>Factory</h3>
            <div>
                <a href="javascript:void(0);" id="dog-factory-btn" class="btn btn-outline-secondary">Get a dog from factory</a>
                <a href="javascript:void(0);" id="cat-factory-btn" class="btn btn-outline-secondary">Get a cat from factory</a>
            </div>
            <div class="mt-2" style="outline: 1px solid #bbb; padding: 1em;">
                <pre id="factory-output" style="margin:0;"><span>Nothing received yet...</span></pre>
            </div>

            <hr class="mt-4">
            <h3 class="mt-3">Abstract Factory</h3>
            <div>
                <a href="javascript:void(0);" id="dog-abstract-btn" class="btn btn-outline-secondary">Get a dog from abstract factory</a>
                <a href="javascript:void(0);" id="cat-abstract-btn" class="btn btn-outline-secondary">Get a cat from abstract factory</a>
            </div>
            <div class="mt-2" style="outline: 1px solid #bbb; padding: 1em;">
                <pre id="abstract-factory-output" style="margin:0;"><span>Nothing received yet...</span></pre>
            </div>
        </div>
    </div>
</div>
{{ end }}

{{ define "js" }}
<script>
let dogFactoryButton = document.getElementById("dog-factory-btn");
let catFactoryButton = document.getElementById("cat-factory-btn");
let factoryOutput = document.getElementById("factory-output");

let dogAbstractFactoryButton = document.getElementById("dog-abstract-btn");
let catAbstractFactoryButton = document.getElementById("cat-abstract-btn");
let abstractFactoryOutput = document.getElementById("abstract-factory-output");

document.addEventListener("DOMContentLoaded", function() {
    dogFactoryButton.addEventListener("click", function() {
        fetch("/api/dog-from-factory", {method: 'GET'})
        .then((response) => response.json())
        .then((data) => {
            if (data.error) {
                factoryOutput.innerHTML = data.error;
            } else {
                factoryOutput.innerHTML = JSON.stringify(data, undefined, 4);
            }
        })
    });

    catFactoryButton.addEventListener("click", function() {
        fetch("/api/cat-from-factory", {method: 'GET'})
        .then((response) => response.json())
        .then((data) => {
            if (data.error) {
                factoryOutput.innerHTML = data.error;
            } else {
                factoryOutput.innerHTML = JSON.stringify(data, undefined, 4);
            }
        })
    });

    dogAbstractFactoryButton.addEventListener("click", function() {
        fetch("/api/dog-from-abstract-factory", {method: 'GET'})
        .then((response) => response.json())
        .then((data) => {
            if (data.error) {
                abstractFactoryOutput.innerHTML = data.error;
            } else {
                abstractFactoryOutput.innerHTML = JSON.stringify(data, undefined, 4);
            }
        })
    });

    catAbstractFactoryButton.addEventListener("click", function() {
        fetch("/api/cat-from-abstract-factory", {method: 'GET'})
        .then((response) => response.json())
        .then((data) => {
            if (data.error) {
                abstractFactoryOutput.innerHTML = data.error;
            } else {
                abstractFactoryOutput.innerHTML = JSON.stringify(data, undefined, 4);
            }
        })
    });
});

</script>

{{ end }}